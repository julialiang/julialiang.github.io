<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Add a New Recipe</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" media="all" href="css/app.css">
    <script src="https://use.typekit.net/xkn7usp.js"></script>
    <script>try{ Typekit.load({async: true}); } catch (e){}</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
      var theURL = "https://9821d7ql60.execute-api.us-east-1.amazonaws.com/prod/RecipeUpdate?TableName=Recipes";
      $(document).ready(function(){
        function submit(data_string) {
          $.ajax({
            type: 'POST',
            url: theURL,
            data: data_string,
            success: function(data) {
              alert("Added new recipe successfully!");
            },
            error: function(xhr, ajaxOptions, thrownError) {
              console.log(thrownError.message);
              console.log(xhr.message);
              console.log(ajaxOptions.message);
            }
          });
        }

        $("#submit_recipe").click(function(event){
          event.preventDefault();
          var newRecipe = {"TableName": "Recipes", "Item": { "Directions": $("#directions").val(), "ImageSRC": $("#image").val(), "RecipeName": $("#recipe_name").val(), "Ingredients": $("#ingredients").val()}};
          // var oldRecipe = {"TableName": "Recipes",
          //                           "Item": {
          //                             "RecipeName": "mayo", 
          //                             "Ingredients": "mayo",
          //                             "Directions": "mayo",
          //                             "ImageSRC": "mayo"
          //                           }
          //                       };           
          submit(JSON.stringify(newRecipe));
        });
        // $("#getReq").click(function(){
        //   $.get(theURL, function(data, status){
        //       $("#result").text(JSON.stringify(data));
        //   });
        // });
      });
    </script>
  </head>

  <body>
    <div class="out about">
      <header class="header">
        <div class="header__center center center_lg">
          <nav class="header__nav js-nav">
            <a href="index.html" class="header__link"><img src="img/home.png" style="width: 12px; margin-right: 10px">HOME</a>
            <a href="#" class="header__link"><img src="img/add.png" style="width: 12px; margin-right: 10px">ADD A RECIPE</a>
            <a href="#" class="header__link"><img src="img/search.png" style="width: 12px; margin-right: 10px">SEARCH RECIPES</a>
            <a href="#" class="header__link"><img src="img/settings.png" style="width: 12px; margin-right: 10px">SETTINGS</a>
          </nav>  
        </div>
      </header>
      <div class="promo" style="background-image: url(http://localmilkblog.com/wp-content/uploads/2016/11/untitled-15.jpg); background-size: cover; background-position: 0px; background-repeat: no-repeat; !important">
        <div class="promo__center center">
          <div class="promo__title">Add a Recipe</div>
        </div>
      </div>
      <div class="container">
        <div class="section section_start section_finish">
          <div class="section__center center">
            <div class="content">
              <form>
                <input type="text" class="form-control" id="recipe_name" placeholder="Recipe Title" required> </br>
                <textarea class="form-control" id="ingredients" placeholder="Ingredients" rows="6" required></textarea></br>
                <textarea class="form-control" id="directions" placeholder="Preparation Steps" rows="6" required></textarea></br>
                <textarea class="form-control" id="image" placeholder="Image Link" rows="6" required></textarea></br>
                <button id="submit_recipe">Submit Recipe</button>
              </form>
<!--               <button id="getReq">Send HTTP GET request to a AWS and get result</button><br>
              <div id="result">Result</div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>